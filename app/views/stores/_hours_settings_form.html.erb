<%= form_for(@store, :html => {:id => "profileForm",:multipart => true, :remote => true}) do |f| %>
  <% if @store.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@store.errors.count, "error") %> prohibited your information from being saved:</h2>

      <ul>
      <% @store.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  
  <div class="field add-margin-top">
    <div class="row">
      <div class="col-md-6">
        <h6 class="">Weekday opening time</h6>
        <button class="btn btn-secondary box-shadow btn-block set-time-opening height-50" style="margin-top: 10px;" id="filterItems" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <% if current_store.opening_weekday.empty? %>
            Select time <i class="fa fa-angle-down"></i>
          <% else %>
            <%= current_store.opening_weekday %> <i class="fa fa-angle-down"></i>
          <% end %>
        </button>
        <div class="dropdown-menu" style="width: 100%; margin-top: 225px;" aria-labelledby="dropdownMenuButton">
          <% hours.each do |h| %>
              <a class="dropdown-item theme-blue cursor-pointer" id="time-<%= h %>" onclick="setTime(this, 'openingWeekday', 'opening')"><%= h %></a>
              <div class="dropdown-divider"></div>
          <% end %>
        </div>
        <%= f.hidden_field :opening_weekday, class:"form-control no-box-shadow height-50 font-16 pf", id:"openingWeekday", autofocus: true, placeholder:"9:00AM" %>
      </div>
      <div class="col-md-6">
        <h6 class="">Weekday closing time</h6>
        <button class="btn btn-secondary box-shadow btn-block set-time-closing height-50" style="margin-top: 10px;" id="filterItems" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <% if current_store.closing_weekday.empty? %>
            Select time <i class="fa fa-angle-down"></i>
          <% else %>
            <%= current_store.closing_weekday %> <i class="fa fa-angle-down"></i>
          <% end %>
        </button>
        <div class="dropdown-menu" style="width: 100%; margin-top: 225px;" aria-labelledby="dropdownMenuButton">
          <% hours.each do |h| %>
              <a class="dropdown-item theme-blue cursor-pointer" id="time-<%= h %>" onclick="setTime(this, 'closingWeekday', 'closing')"><%= h %></a>
              <div class="dropdown-divider"></div>
          <% end %>
        </div>
        <%= f.hidden_field :closing_weekday, class:"form-control no-box-shadow height-50 font-16 pf", id:"closingWeekday", autofocus: true, placeholder:"5:00PM" %>
      </div>
    </div>
  </div>
  <div class="field" style="margin-top: 20px;">
    <div class="row">
      <div class="col-md-6">
        <h6 class="">Saturday opening time</h6>
        <button class="btn btn-secondary box-shadow btn-block set-time-opening-saturday height-50" style="margin-top: 10px;" id="filterItems" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <% if current_store.opening_saturday.empty? %>
            Select time <i class="fa fa-angle-down"></i>
          <% else %>
            <%= current_store.opening_saturday %> <i class="fa fa-angle-down"></i>
          <% end %>
        </button>
        <div class="dropdown-menu" style="width: 100%; margin-top: 225px;" aria-labelledby="dropdownMenuButton">
          <% hours.each do |h| %>
              <a class="dropdown-item theme-blue cursor-pointer" id="time-<%= h %>" onclick="setTime(this, 'openingSaturday', 'opening-saturday')"><%= h %></a>
              <div class="dropdown-divider"></div>
          <% end %>
        </div>
        <%= f.hidden_field :opening_saturday, class:"form-control no-box-shadow height-50 font-16 pf", id:"openingSaturday", autofocus: true, placeholder:"9:00AM" %>
      </div>
      <div class="col-md-6">
        <h6 class="">Saturday closing time</h6>
        <button class="btn btn-secondary box-shadow btn-block set-time-closing-saturday height-50" style="margin-top: 10px;" id="filterItems" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <% if current_store.closing_saturday.empty? %>
            Select time <i class="fa fa-angle-down"></i>
          <% else %>
            <%= current_store.closing_saturday %> <i class="fa fa-angle-down"></i>
          <% end %>
        </button>
        <div class="dropdown-menu" style="width: 100%; margin-top: 225px;" aria-labelledby="dropdownMenuButton">
          <% hours.each do |h| %>
              <a class="dropdown-item theme-blue cursor-pointer" id="time-<%= h %>" onclick="setTime(this, 'closingSaturday', 'closing-saturday')"><%= h %></a>
              <div class="dropdown-divider"></div>
          <% end %>
        </div>
        <%= f.hidden_field :closing_saturday, class:"form-control no-box-shadow height-50 font-16 pf", id:"closingSaturday", autofocus: true, placeholder:"5:00PM" %>
      </div>
    </div>
  </div>
  <div class="field" style="margin-top: 20px;">
    <div class="row">
      <div class="col-md-6">
        <h6 class="">Sunday opening time</h6>
        <button class="btn btn-secondary box-shadow btn-block set-time-opening-sunday height-50" style="margin-top: 10px;" id="filterItems" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <% if current_store.opening_sunday.empty? %>
            Select time <i class="fa fa-angle-down"></i>
          <% else %>
            <%= current_store.opening_sunday %> <i class="fa fa-angle-down"></i>
          <% end %>
        </button>
        <div class="dropdown-menu" style="width: 100%; margin-top: 225px;" aria-labelledby="dropdownMenuButton">
          <% hours.each do |h| %>
              <a class="dropdown-item theme-blue cursor-pointer" id="time-<%= h %>" onclick="setTime(this, 'openingSunday', 'opening-sunday')"><%= h %></a>
              <div class="dropdown-divider"></div>
          <% end %>
        </div>
        <%= f.hidden_field :opening_sunday, class:"form-control no-box-shadow height-50 font-16 pf", id:"openingSunday", autofocus: true, placeholder:"9:00AM" %>
      </div>
      <div class="col-md-6">
        <h6 class="">Sunday closing time</h6>
        <button class="btn btn-secondary box-shadow btn-block set-time-closing-sunday height-50" style="margin-top: 10px;" id="filterItems" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <% if current_store.closing_sunday.empty? %>
            Select time <i class="fa fa-angle-down"></i>
          <% else %>
            <%= current_store.closing_sunday %> <i class="fa fa-angle-down"></i>
          <% end %>
        </button>
        <div class="dropdown-menu" style="width: 100%; margin-top: 225px;" aria-labelledby="dropdownMenuButton">
          <% hours.each do |h| %>
              <a class="dropdown-item theme-blue cursor-pointer" id="time-<%= h %>" onclick="setTime(this, 'closingSunday', 'closing-sunday')"><%= h %></a>
              <div class="dropdown-divider"></div>
          <% end %>
        </div>
        <%= f.hidden_field :closing_sunday, class:"form-control no-box-shadow height-50 font-16 pf", id:"closingSunday", autofocus: true, placeholder:"5:00PM" %>
      </div>
    </div>
  </div>
  <h6>Do you deliver during business hours?</h6>
  <div class="field">
    <div class="row">
      <div class="col-md-12 text-center">
        <div class="btn-group btn-group-toggle btn-block" data-toggle="buttons">
          <label class="btn btn-secondary active no-box-shadow white" id="deliverYes" onclick="setDelivery(value='yes');">
            <input type="radio" name="yes_delivery" autocomplete="off"> <span>Yes</span>
          </label>
          <label class="btn btn-secondary no-box-shadow white" id="deliverNo" onclick="setDelivery(value='no');">
            <input type="radio" name="no_pickup" autocomplete="off"> <span>No</span>
          </label>
        </div>
      </div>
    </div>
    <%= f.hidden_field :delivers, id:"storeDelivers", value:"yes" %>
  </div>
  <div class="actions text-right">
    <%= f.submit "Update!", class:"btn btn-primary font-14 btn-lg cursor-pointer update-profile height-50" %>
  </div>
<% end %>

<script type="text/javascript">
  function setTime(elem, inputID, context) {
    var id = elem.id;
    var time = id.split('-')[1]
    document.getElementById(inputID).value = time;
    // var time = $('#'+id).text();
    // console.log(time);
    $('.set-time-'+context).html(
        time + ' <i class="fa fa-angle-down"></i>'
    );
  }
</script>